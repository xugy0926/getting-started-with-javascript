# JS函数

## 什么是函数？

函数可以认为是一段JavaScript代码片段，也可以认为是一个代码黑盒，也可以认为是一台代码机器。不管你怎么理解，它具有一个重要的特征：你告诉它干活，它就能给你相应结果。至于能干什么活，那就是函数设计者的事情。



一台机器，被造一次，就可以重复的工作。函数也如此，只需要创造(定义)一次，就可以重复的调用。



当函数被调用时，就开始这行这个任务。多次被调用，就多次执行这个任务。多次执行看上去是重复，其实不然。比如，人每天要吃饭，你调用了你自己的吃饭函数，每天执行三次。一年就会执行365 * 3次。是否重复执行某个函数取决于那你的需求。



函数就是一个可以执行固定任务的代码段，函数只需要定义一次，但能被执行任意次。

    // 定义一个函数print
    function print() {
      console.log('hello, JS');
    }
    
    // 多次调用print函数
    print();
    print();
    print();

上面的代码按顺序调用了三次print函数，并在终端打印了三次hello, JS。这段代码从实际意义来讲没什么价值，但是一个可以解释函数可以被人一次调用的案例。

## 定义一个函数的语法

定义函数最少最少需要三个元素：

- 关键字function
- 函数名
- 一对挂括号{}

#### 关键字function

定义函数时，关键字function必不可少。缺少关键字function，解释器将理解不了这是一个函数的定义。

    print() {
      console.log('hello, JS');
    }
    
    这是什么鬼，编译器完全不认识，在执行编译的时候直接就报错。

错误的语法就像人类语言一样不能被理解。我在吃饭可以理解，我吃饭在就不能理解。v8引擎虽然快，但不聪明。v8引擎要理解代码，都是靠规则检查，不符合规则的语法都是错误语法，编译直接报错。



#### 函数名

定义函数时，函数名也必不可少。缺少函数名，函数肯定无法被调用，这个函数被定义出来没有价值。

    function () {
      console.log('hello, JS');
    }

这段代码在代码编译和执行时并不会出错。虽然编译器不会报错，但这段代码怎么被调用？肯定无法调用。

特别注意：这段代码有一种说法叫：函数表达式。函数表达式如果能赋给一个变量，这个函数表达式就具备了活力。这个知识点将在匿名函数中重点讲解，请留意。

#### 一对挂括号

定义函数式，一对挂括号太重要了。没有挂括号，函数的函数体就没有了界限。不管是谁写出来的代码，不管是理解上很简单的代码，还是理解上很复杂的代码，最终这些代码都会被送到V8引擎去编译解释。编译的过程是干什么？就是检查代码的语法是否正确。



一对挂括号的作用就是告诉编译器：哥们，紧跟在我后面那对挂括号里的代码都是我的函数体，你在编译检查的时候给我看仔细咯。

    function print() {
      console.log('hello, JS');
    }



如果缺少挂括号，情况就很麻烦了



    function print() {
      console.log('hello, JS');
    
    print();

上面代码缺少右挂括号，编译器就认为print()就是函数print的函数体内容。这势必带来了严重问题。



## 像使用变量一样使用函数名

函数名从某种意义上可以理解为变量名，先复习一下变量的使用方式。

    // 定义一个变量name，并赋值字符串'xiaoming'
    var name = 'xiaoming';

因为字符串xiaoming被赋值给了变量name，我们才得已通过name来操作字符串xiaoming

    // 把变量name的值和字符串xu进行相加
    var fullname = 'xu' + name; 两个字符串相加。
    
    // 把变量name的值传递给console的log函数进行打印
    console.log(name);

以上是使用变量的方式。一个变量要先定义后使用，函数也应该要先定义后使用。



先定义函数（定义函数最少最少需要两个要素，关键字function和函数名。）

    function print() {
      console.log('hello, JS');
    }

再使用（使用函数一般称为调用）

    print();

先定义后使用之间的关联就是函数名起到联系。

变量名和函数名的使用方式的明显差异就是函数名在调用时要带上一对括号。



先定义再使用，先定义再使用，先定义再使用。重要的事情说三遍。

但，函数定义即使放在调用的下面也没问题。

    // 调用print函数
    print();
    
    // 定义函数print
    function print() {
      console.log('hello, JS');
    }



为什么不是先定义再使用？这是因为函数在编程过程中使用太平凡了，如果总是要考虑函数的定义在前使用再后的话，就会束缚中设计思路。

为了保证先定义再使用，还不束缚编程人员的思路。怎么解决？编译器会把js文件的所有函数定义全部移到最前面。哇喔~V8引擎的设计者真是厉害。



## 函数三要素

假如你要请一个人帮忙做某事，你必须要明确到底请谁（函数名）？告诉他你的要求（参数）是什么，他处理完事情后就会给你一个结果。



当你要定义（设计）一个函数的时候，你就要站在设计函数的角度去思考。

1. 我设计这个函数到底是为了完成什么功能？
2. 我设计这个函数需不需要调用者给我一些数据？
3. 我设计这个函数有没有必要返回一个结果数据？
4. 我设计这个函数应该用什么方式返回数据？
   

当你要调用一个函数的时候，你就要站在使用者的角度去思考。

1. 我调用的这个函数能否完成我想要的功能。
2. 我调用的这个函数都需要一些什么数据才能完成功能。
3. 我调用的这个函数会不会给一个结果数据。
4. 我调用的这个函数用的是什么方式返回数据。



从设计函数的角度和从使用一个函数的角度，都反映出几个重要的要素。



1. 函数名。一个函数名对应了一个函数执行体，这个执行体会完成一个具体的功能。
2. 参数。一个函数在执行的时候可能需要参数，也可能不需要。
3. 返回值。一个函数执行完后，可能返回一个结果，也可能不返回。



这三点就是函数最重要的三个要素。



#### 函数名

前面已经讲过，函数名理解成变量名。

#### 参数

参数作用可以一句话总结：在函数执行过程中，完成某些逻辑处理时需要的一些必要的数据。

比如：你设计一个两个数想加的函数，你得给函数两个数吧。否则函数怎么知道加哪两个数。

这种道理就像你去超市买东西，你得给钱，给钱才能得到食品。



参数就是函数设计者向调用者要求的数据来源方式。



之前有同学问我说：老师，有的函数就没有参数，也没有返回值。那这不就违背了函数必要的三要素特点吗？



还是看上面的例子，这就没有参数

    function print() {
      console.log('hello, JS');
    }



在解释这件事情之前来看一个生活例子，假如你去面馆吃面。



> 你：服务员，来一份山西刀削面。
> 服务员：要加量吗？。
> 你：不要。
> 服务员：一碗刀削面，正常做。



从上面的对话看出来，你要了一份刀削面，并没有提额外的要求。但，服务员明确知道你是要一碗正常的刀削面。这难道就不是你的要求吗？



在设计函数也是一样，你在设计（定义）一个函数的时候不设计参数，就是明确告诉调用者，别给我参数，给了我也不会用，这就是很明确的要求。



那调用者就是不听话，给了参数怎么办？

    function print() {
      console.log('hello, JS');
    }
    
    var content = 'hello, world'
    print(content);

上面的代码，在调用的print的时候，给了一个变量content。最终print这个函数在执行时，有用到content的内容吗？没有用。print根本就不调，我行我素的执行了console.log('hello, JS')。



上面这个错误使用可以反映两件事情。

1. 如果你定义（设计）了一个函数，而调用者总是不按你的套路调用这个函数。这反映出你的这个函数设计让人不可理解，很晦涩。此刻怀疑一下自己，是不是函数设计的时候出了什么问题？
2. 如果你调用一个函数，人家明明不要参数，你还给参数。此刻怀疑一下自己，是不是你对人家定义的函数理解上出了问题。



总之，我们不要出现定义的函数在使用的时候不匹配的情况，多给了还好说，如果少给了参数，直接导致函数不能执行。



    // 定义print函数，该函数有一个参数content
    function print(content) {
      console.log(content);
    }
    
    print('hello, JS'); // 完美！print在定义的时候明确需要一个参数，在调用的时候给了一个字符串。
    print(); // 尴尬！print在定义的时候明确需要一个参数，但没给！

上面的代码中，在调用print()的时候，print函数体内的console.log(content)会打印出undefined，一个不明确的值。这是因为print函数在被调用时，从调用者那边没有设置内容给参数变量content。

这个错误在实际工作中经常发生。



再举个例子

    function print(name, content) {
      console.log('i am ' + name);
      console.log('i am learnning ' + content);
    }
    
    print('xiaoming', 'JS'); // 完美！参数逻辑都对应上了。
    print('JS', 'xiaoming'); // 尴尬！参数逻辑没有对应上。

上面的代码第一次调用print时没有问题，在调用print函数时，字符串xiaoming赋值给了print函数的name参数，字符串JS赋值给了print函数的content参数。



但第二次调用print出现了逻辑问题。注意：是逻辑问题而不是代码问题。

把字符串JS给了name，把xiaoming给了content，从而导致print的函数体在执行输出时，打印结果牛头不对马嘴。



所以说，理解一个函数的参数的意义很重要。



#### 返回值

一个函数要不要明确返回结果取决设计者的自我判断。

    function print(content) {
      console.log(content);
    }
    
    print('hello, JS');

print这个函数的功能就是打印调用者传进来的内容，打印就结束，没有必要返回某个值。就好比妈妈让你下楼的时候倒垃圾，你到完垃圾就直接去玩吧。难不成你还跑上楼告诉一下妈妈说：我倒完垃圾了，我去玩了哈。这就有点多此一举了。



当然你真的可以这么做。

    function print(content) {
      console.log(content);
      return true; // 给一个返回值，返回true表示打印完了。
    }
    
    var result = print('hello, JS');

真的没必要！



来看一个需要明确返回值的例子。

    function sum(x, y) {
      var result = x + y;
      return result;
    }
    
    var result = sum(1, 2);

sum这个函数被设计成做两个数的相加，加完的结果明确了返回（return result）。这个返回值就很必要，如果加完不给结果这个函数就没有多大意义。



一个函数在定义的时候明确了返回值，调用者就要明确用一个变量来接收返回值。上面的例子中，var result = sum(1, 2);就很明确接收了返回值。当sum函数体内执行完后，return出来的result给到了调用者定义的result变量（注意：sum函数内部的result变量和sum函数外面的result变量不是一个作用域下的，它们是不同的两个变量）。



调用者接收了sum函数返回的变量有什么意义呢？— 当然拿着结果可以继续计算嘛。

    function sum(x, y) {
      var result = x + y;
      return result;
    }
    
    var result = sum(1, 2);
    console.log(result);

看到没，只有用result变量接收了sum的返回值，我才有机会打印结果（脑子要闪现一个口诀：不被使用的变量都是垃圾代码）。



那函数返回的结果我就是不接收返回值，能拿我怎样？

确实不能拿你怎么样，这时候就要讲讲道理了。给你返回值不用？就可能有两个问题。

1. 函数设计者要考虑，是否有必要返回结果。
2. 函数调用者要考虑，是否有必要使用这个带返回值的函数，这真的是你想要调用的函数吗？



## 总结

学习函数一定要站在两个角度分别考虑问题。

1. 设计函数的角度。
2. 使用函数的角度。
   

当你自己又是函数的设计者，又是函数的使用者。你自己就要做好思维切换：）慢慢习惯了就好了。
