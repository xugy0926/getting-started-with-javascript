#JS 第六节  2017.08.26

**心理建设：**

刚开始听说要做这个，觉得好难啊，自己还没有独立写过代码，有点怵的慌。但是大早上起来也无所事事，我就想先看老师study/lesson6中的代码吧，肯定有给提示的。

于是就开始做了，打开看了下是四个文件，分别是scan和write的文件，分别有两个，一个是同步，一个是异步。看了一下，分别运行了一下代码，觉得这不就是把两个代码放在一起就可以了嘛，一个扫描，一个放在txt格式的文件中。

这时觉得自己so clever，于是就喜滋滋开始做了。开始在一个新的js文件中一行行抄老师的代码。其中有几个让自己把之前so clever的想法全盘抛弃的节点，下面总结出来，让自己明白：熟能生巧，不是你不能巧，而是还不熟。

##异步

###问题1、定义要查询的目标文件夹

dirPathString使用的是相对路径的方式找到要读取的文件夹的。也就是说你现在运行的这个JS代码的文件夹才是坐标的原点，你要根据这个文件的坐标去找你要读取的文件夹的位置。

比如我们的作业中，我们的作业JS代码按要求是要放在homework下的lesson6中的，而我们要读取的是words-from-the-heart的文件夹，那么你需要退回到homework，然后退回到getting-started-with-javascript,再退回到my_project中，你才能在这个文件夹中打开words-from-the-heart的文件夹，于是代码就是：
> '../../../words-from-the-heart

**Notice**：刚开始搞不懂可以一直试，运行后下面报错就是我们学习的最好资料。反正电脑也不会崩，怕啥（当然，觉得自己有点蠢，那也没关系，人生难得几回蠢）。

###问题2、fileContent
write文件中与scan程序类似，运行老师的代码，就会发现会出现一个TXT格式的文件，里面写着“Hello，JS”。这是因为fileContent变量被定义赋值为'Hello，JS'。我们的目的是让之前扫描文件夹中的文件名被写入txt文件中，因为扫描打印的是files，所以：
>var fileContent = files；

###问题3、换行

代码写好后，运行，看到homework/lesson6中出现一个txt的文件，里面有62个文件（没有更新的情况下），但是所有的名字都在一行，完全懵，没法看。就想着怎么可以换行，做到一个文件夹名一行？

去网上搜索查到了换行符号(“\n”)，就打在了files的后面，但是发现files不是函数，直接在后面打括号，那肯定要报错的，于是运行了一下，果然是。

继续查找，在别人的代码中发现join()，然后在网上查到用法：
>join方法用于把数组中的所有元素放入一个字符串,元素是通过指定的分隔符进行分隔的。

那用join（"\n")的方法应该可以，遂运行，成功（因为是要对内容修改，所以这是写在fileContent后面的，对问题2的补充。

代码：

>var fileContent = files.join("\n");

##同步

做完了异步，同步就很简单了，没有什么问题。

---

做完了同步和异步，比较两者的代码，会发现同步的代码很简单，而异步的代码比较繁琐。其实还没有达到可以选择什么时候用同步，什么时候用异步的程度，只能照猫画虎。

还需要加强理解，现在的状态是只能看着例子，想着实际生活理解，还不能熟练，接下来一周的任务就是巩固之前的知识，开始认真看书的第二遍（第一遍太囫囵吞枣）；跟上听课，完成作业（不计划做太多的课外拓展）。

