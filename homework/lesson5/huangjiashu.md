### 写在前面

做作业之前我在思考一个问题，那就是 间接返回 。 看直播时对 间接返回和异步 一直搞不清楚。自我感觉模棱两可。故在做作业时有了以下思考。
作业本是七夕下午写的，无奈七夕老板大发慈悲整整提前一个小时允许大家下班，然后被同事拉去吃东西。因为我电脑一直在维修中，所以作业其实是第二天写完了。
七夕当天提了个问题在issue，感谢老师和其他同学的回答。最为感动的是深夜看第六节的回放，看的很感动。因为某些人在我的作业中竟然体会到了我的感受。也感谢老师和同学们的鼓励。我上周非常忙，一个星期的时间我做了一个app1.0版本。现在在赶作业。以后的直播我会尽量赶上的。

### 间接返回和异步的理解
间接返回通道：
什么是间接返回通过：间接返回通道就是在函数中开辟一个通道，用来传递数据。
例子就是：老板打电话给秘书查询航班信息，在挂电话之前把 查到的信息通过微信发回给老板。


```
// 间接返回通道
// 采购食物的函数
function buyFoods(callback) {
  console.log('采购原料和菜');
  var foodsList = ['fish', 'egg', 'meat'];
  callback(foodsList);
}
// 调用者的代码片段
function callback(foodsList) {
  console.log(foodsList);
}
buyFoods(callback);
```

// 直接调用
// 采购食物的函数 注意没有参数

```
function buyFoods() {
  console.log('采购原料和菜');
  var foodsList = ['fish', 'egg', 'meat'];
  callback(foodsList);
}
// 调用者的代码片段
function callback(foodsList) {
  console.log(foodsList);
}

buyFoods()
```

这两个调用结果完全一样。但是调用方式却不同。
那么既然结果完全一样，为什么还要有回调函数，何不直接调用呢？既生瑜何生亮！！！

这是为了解决什么问题呢？
这是个问题，我已经提到[issue](https://github.com/xugy0926/getting-started-with-javascript/issues/407)里了
。因为就快陷入思考的胡同里去了。

> **尽管有些东西可能本身没有什么意义，但是你的思考赋予了他意义。**

> 晚上又复习了下回放，看了一下你的回答，我也理解了一些。似乎这个问题不是那么重要，因为或许本身就没有什么区别，重要的是理解立即返回，和间接返回。这个我倒是理解的。
> 我想了想，其实我写的两个例子应该都是间接返回。所以看上去并无差别。因为他符合间接返回的条件：在外部定义了一个函数（间接返回通道），然后在函数内调用了一下。应该没有什么问题吧。

> 我觉得是一样的，那么问题就在于，是否把这个函数名作为参数进行传递。

> 作为参数的好处就是，他是一个形式参数，不管我外面定义的通道的名字，如何改变，我这个函数的结构都，不用更改，而如果不作为参数，一但我通道名字发生改变，那我就必须改变这个函数。

> 最重要的一点是，**如果我没定义这个参数，就等于我把函数写死了**，我自己使用可能还无所谓，作为一个使用者，没有回调函数肯定是要骂死我的。连传参数都不知道怎么传。从函数的编写者来讲，这是多么失败的函数。
我终于明白了，诸葛亮要比周瑜强很多啊。

> 我想这应该是原因所在吧！这也是深夜看回放的一些启发。

> 至于异步，我觉得把里面的函数名，通过setTimeOut函数调用一下，他应该也是异步函数吧！因为我觉得他符合异步函数的条件。因为它并没有立马执行。



> 老师说，讲间接返回是为了引出异步这个概念。异步就是用了间接返回。举了一个例子，就是调用了setTimeOut。我甚至都没有觉得，间接返回和异步有什么不一样的地方。

> 老师说，获取数据有两个方式，一个是立即返回，一个是callback.称之为回调。而这个callback，我相信指的就是间接返回，而异步就是间接返回的一个应用。与异步相对的概念，就是同步。那么我就可以把间接返回函数，也分为同步函数，和异步函数。我觉得同步与异步的差异，就是在于时间。对于耗时操作，同步间接返回函数，必须等到返回之后才能结束整个函数。那异步返回函数，则无需等待。

> 我在文中有任何理解有偏差的地方，还请老师及时指正，帮助我在错误的道路上渐行渐远。



### 作业
1. 关于函数执行

我在flight_schedule_3更改了代码，在setTimeout函数后面添加了一句，console.log('我执行了');
```
function checkFlightSchedule(callback) {
  console.log('开始查航班信息');

  setTimeout(function() {
    // 模拟构建航班的时间信息
    var scheduleInfo = {
      start: '8/23 8:00',
      end: '8/23 10:30',
      from: 'beijing',
      to: 'hangzhou'
    };

    callback(scheduleInfo.start);
  }, 5000);

  console.log('我执行了');
}

//---------------------------------------
function callback(startTime) {
  console.log('通过反馈通道获得了信息');
  console.log(startTime);
}

// 执行查询函数
checkFlightSchedule(callback);
```
实时证明： checkFlightSchedule 先执行完， 然后 5秒后 才执行的setTimeout 中的匿名函数。这一点证实了异步函数和同步函数的本质区别。

```
node flight_schedule_3
开始查航班信息
我执行了
通过反馈通道获得了信息
8/23 8:00
```
同样的修改之前flight_schedule_2的代码 都是同步函数案例，
```
function checkFlightSchedule(callback) {
  console.log('开始查航班信息');

  // 模拟构建航班的时间信息
  var scheduleInfo = {
    start: '8/23 8:00',
    end: '8/23 10:30',
    from: 'beijing',
    to: 'hangzhou'
  };

  callback(scheduleInfo.start);
  console.log('我执行完了')
}

//---------------------------------------
function callback(startTime) {
  console.log(startTime);
  for (var i = 0; i < 100000000; i++) {
    if (i === 99999999) {
      console.log('回调函数执行完了')
      }
  }
}

// 调用函数checkFlightSchedule，并塞一个回调函数以获取结果
checkFlightSchedule(callback);
```
```
node flight_schedule_2
开始查航班信息
8/23 8:00
回调函数执行完了
我执行完了
```

其结果是等待回调函数执行完毕后才执行的“我执行完了”,由此可见这个间接返回也是个同步函数。
这说明，回调是同步还是异步，取决于函数本身。举例说明就是 示例中的callback 本身就是一个同步函数， 而 setTimeout 本身就是一个异步函数。
同样的 在kitchen_workflow_async.js案例中也证实了这一点，比如这个例子的打印结果是先“我要开始采购食物啦。。。。”
后 “事情安排好了，我先去洗个澡” 


kitchen_workflow_async这个例子感觉写的很经典，流程控制函数让整个流程让人看上去很思路很清晰。prepare在这里返回值永远为true，本身并无意义。但写入流程控制函数，就显得很有意义。很明显让我觉得有一个判断过程。而开始做事前的判断很重要。that is to say 思维，逻辑重要。一个好的流程，应当有严谨的逻辑。



2. 图片上的代码，第1行、第5行、第6行的name变量都有什么差异？
第1行，的name是函数的参数，这个参数在这里是形参，没什么具体意义。

第2行，是函数中，对这个形参的使用。这两个参数是一致的。也只有在调用赋值的时候，这些参数才有意义，才有实际的值。

第5行，是定义了name变量，并赋予了实际的值。

第6行，是调用output函数，将实际的name变量作为参数传给了函数。函数内部会有一个转换过程。也就是简单的赋值操作，name=name
